---
title: "異例のアプローチ：MacからLinuxへのBluetooth経由SSs" # 記事のタイトル
emoji: "😸" # アイキャッチとして使われる絵文字（1文字だけ）
type: "tech" # tech: 技術記事 / idea: アイデア記事
topics: [] # タグ。["markdown", "rust", "aws"]のように指定する
published: false # 公開設定（falseにすると下書き）
---
# 異例のアプローチ：MacからLinuxへのBluetooth経由SSH

## はじめに

テクノロジーの実験の世界では、遊び心から予想外の突破口がしばしば生まれます。その中でも注目すべき偉業の一つが、MacとLinuxシステム間でBluetoothを介してSSH接続を確立できる能力です。冗談から始まったこの興味深い実験が、驚くほど成功した冒険へと発展し、SSH通信のためのシームレスなインターフェースを提供しています。本記事では、この異例の方法の詳細に迫り、関与する手順を探求します。

## 異例の実験

このプロセスは、BluetoothとSSHという異なる技術間のギャップを埋めることを含みます。伝統的にBluetoothはポートの概念を持っていないため、SSH接続は不可能に思えます。しかし、この実験はRFCOMM（シリアル通信プロトコル）の力を巧みに利用してSSHトラフィック（TCPパケット）を運びます。その結果、シリアル通信とネットワーク通信の融合、Bluetoothを介したSSH接続が実現します。

## 注目すべき成功

BluetoothとSSHの融合によるMacとLinuxシステム間のSSH接続の実現は、魅力的な実験です。この異例の方法の実現可能性は、興奮をもって迎えられるばかりか、将来の探求と潜在的な応用の可能性をもたらします。

## Telnetとの比較

Telnetが同様の目的に役立つと主張するかもしれませんが、SSHはより安全で堅牢な接続を提供します。一方でTelnetはSSHの提供する暗号化とセキュリティ機能を欠いています。さらに、この方法はローカルポートフォワーディング、HTTP/RDPフォワーディング、X11フォワーディング、SCP転送など、さまざまな機能を提供し、実験に多様性を加えています。

## macOSでの課題

macOSはBluetoothに関して独自の挙動を示すため、Bluetoothを使用した接続の設定が最も複雑です。テストされたシステムの中で、macOSはBluetoothベースの接続を構成するために最も複雑であることが判明しました。難易度の点では、順序はmacOS >> Windows（WSL）> Linuxとなります。この目的のためにmacOSを設定するには、いくつかのApple固有の問題を克服する必要があります。
![](/images/apple-macbook-pro.jpg)

## 予期せぬハードル

ある場面で、iptablesを使用して接続を拒否しようとした際、予期せぬ障害が発生しました。問題はループバックトラフィックに関連しており、調査と解決が必要でした。

## M5Stackを考慮する

この実験をM5Stackで実施しようと考えている方は、通常、メンテナンスにRFCOMM/telnetを使用しています。SSHへの移行は、より安全な通信チャネルを提供する可能性があり、考慮に値します。

## 簡易な実装

幸運なことに、この方法を実装するのは比較的簡単です。必要なコンポーネントにはbluez、bluez-compat（sdptoolやrfcommなどのツール用）、sshd（SSHサーバー）、およびsocatが含まれます。sdptool、rfcomm、socatの代替としてPythonを使用することも可能ですが、この記事は従来のツールセットに焦点を当てています。

## FreeRTOSの柔軟性

FreeRTOSを搭載したESP32プラットフォーム上で動作するM5Stackは、刺激的な開発環境を提供します。Bluetooth/BLEモジュールは特定の要件に合わせてカスタマイズでき、ESP32のAPIはさまざまなBluetoothプロファイルの作成を可能にします。この柔軟性は実験にとって刺激的で有望です。

## EspruinoとRaspberry Pi Pico

この記事ではEspruinoにも触れており、探求の価値があるプラットフォームとして言及されています。また、Raspberry Pi Picoも興味深い選択肢として言及されています。両方のプラットフォームはファームウェアのカスタマイズや実験のためのユニークな機会を提供しています。

## 実装の詳細

この記事では、LinuxとmacOSシステム間でBluetoothを介したSSH接続を確立する詳細な実装手順を提供しています。SSHサーバーとクライアント
